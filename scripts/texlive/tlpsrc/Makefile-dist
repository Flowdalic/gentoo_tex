
include Makefile.common

CONTENTS=YOU_NEED_TO_SET_CONTENTS_VARIABLE_TO_GENERATE_VERSIONNED_LZMA_FILES

$(DISTDIR)/texlive-module-%-$(TEXLIVE_VERSION).tar.xz:
	wget $(TUG)/tlnet/archive/$(@:$(DISTDIR)/texlive-module-%-$(TEXLIVE_VERSION).tar.xz=%.tar.xz) -O $@

$(DISTDIR)/texlive-module-%-$(TEXLIVE_VERSION).tar.lzma: $(DISTDIR)/texlive-module-%-$(TEXLIVE_VERSION).tar.xz
	xz -d $<
	lzma $(<:%.xz=%)

versionnedzips: $(CONTENTS:%=$(DISTDIR)/texlive-module-%-$(TEXLIVE_VERSION).tar.lzma)

%.tlplic: tlpkg/tlpobj/%.tlpobj
	cp $< $@

tlplic: $(CONTENTS:%=%.tlplic)

%.tlpobj: $(TL_TRUNK)/Master/tlpkg/tlpsrc/%.tlpsrc
	$(TL_TRUNK)/Master/tlpkg/bin/tl-update-tlpdb -master=$(TL_TRUNK)/Master -output=$@ --tlpsrc-from-cmdline $<

%.unpacked: $(DISTDIR)/texlive-module-%-$(TEXLIVE_VERSION).tar.lzma
	lzma -dc $< | tar xof -
	touch $@

tlpobj: $(CONTENTS:%=%.tlpobj)

unpacked: $(CONTENTS:%=%.unpacked)
